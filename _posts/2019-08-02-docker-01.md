---
layout: post
title: "Docker 공부 내용 정리 1. 도커 개념 알아보기"
author: soomin
date: 2019-08-02 00:00
tags: [docker]
image: /files/covers/docker_logo.png
---

## Docker

![docker logo](https://live.staticflickr.com/7336/14098888813_1047e39f08.jpg)



기본적으로, 회사에 들어가거나 프로젝트를 진행하다보면 모든 사람들이 같은 환경을 가지고 있지 않다. 노트북 조차 그램 / 맥 등등 ! 각 컴퓨터에 동일한 버전으로 설치를 했다고 할지라도, 뭔가 요상하게 깨지는 일들도 경험해 본적이 있을 것이다. 이런 고역을 피하기 위해 __Docker__ 를 활용해서 개발 환경을 맞추고 배포 관리도 편하게 할 수 있다! 



## 가상화

도커는 __컨테이너 기반 가상화 플랫폼__ 인데, 가상화가 뭔지 궁금했다. 

![visualization](https://www.redhat.com/cms/managed-files/server-usage-500x131.png)

기존에는 1개의 서버에 30%의 서버를 사용하더라도 여러개의 서버를 하나의 서버에 처리하기 어려워, 비효율적이라는 단점이 있었다. 하지만 가상화를 통해서 1개의 서버를 2개의 고유한 서버로 분할 해 각각의 독립적인 태스크를 처리하여, 효율적으로 서버를 사용할 수 있다.

![virtualization](https://www.redhat.com/cms/managed-files/server-usage-for-virtualization-500x131.png)

이렇게 하면 빈 서버를 사용해 다른 태스크를 처리하거나 / 비용을 절감할 수 있다. 가상화에는 호스트형 가상화 / 하이퍼바이저 형 가상화 / 컨테이너 가상화가 있다. 

__호스트형 가상화__

호스트 형 가상화는 하드웨어 위에 `HOST OS` 를 설치하고 가상화 소프트웨어를 이용해 OS 를 작동하는 방식. 가상 환경을 쉽게 구축할 수 있지만,OS 상에서 또다른 OS 가 돌아가므로 자원이 많이 소비되고 느리다. 

##### __하이퍼바이저형 가상화__

__VM__ 의 경우 `hypervisor` 라는 소프트웨어를 통해 물리 리소스를 분리하는 것. 해당 소프트웨어가 하드웨어와 가상 환경을 제어하는데, `host os` 를 사용하지 않지만, 각각의  VM 에서 guest os 가 돌아가기 때문에 가상환경이 시작할 때 걸리는 오버 헤드가 커진다. 

__container 가상화__ 

__VM__ 의 단점인 오버헤드를 최소화 하기 위한 방법으로, HOST OS 상에 독립적인 공간을 만들어, 별도의 서버인 것 처럼 사용한다. 각 어플리케이션이 HOST OS 를 공유하기 때문에 오버헤드가 작아진다. 



![vm vs docker](https://miro.medium.com/max/1400/1*wOBkzBpi1Hl9Nr__Jszplg.png)

VM 의 경우 hypervisor 위에 여러 guest os 가 올라가기 때문에 볼륨이 도커보다 크다. 하지만 도커는 host os 를 공유하기 때문에 해당 볼륨이 작을 뿐더러, docker 의 라이프 사이클은 docker hub 에서 image 를 pull 받으면서 시작하기 때문에, 용량이 훨신 작아 네트워크를 덜 쓰기 때문에 비용도 줄어든다. 


##### 도커 이미지

도커 이미지란 컨테이너를 생성하기 위해 필요한 설계도. 컨테이너를 생성하기 위한 파일. 
해당 파일은 docker hub 에 저장됨. 이미지는 클래스, 컨테이너는 객체 개념인 것 같다. 


##### 도커 컨테이너

다양한 프로그램 / 실행환경을 컨테이너에 묶어 동일한 인터페이스 제공하여 프로그램의 배포 / 관리를 쉽게 해줄 수 있는 도구


배포 관리에 쉽다고 한다. 카피스트라치노나 도커를 사용해 배포 관리를 하는듯. 아직 더 파봐야 알 수 있을 것 같다. 


